{"ast":null,"code":"import { alumnosMock } from \"./datosMock\";\nconst BASE = \"http://servidorclasedaw.onrender.com/alumno2\";\nasync function intentarFetch(url, opciones = {}) {\n  try {\n    const res = await fetch(url, opciones);\n    return await res.json();\n  } catch (error) {\n    console.warn(\"Servidor caído, usando datos locales\");\n    return null;\n  }\n}\nexport async function obtenerTodos() {\n  const data = await intentarFetch(`${BASE}/alumnos`);\n  return data || alumnosMock;\n}\nexport async function obtenerAlumno(id) {\n  const data = await intentarFetch(`${BASE}/alumnos/${id}`);\n  if (data) return data;\n  return alumnosMock.find(a => a.id === Number(id));\n}\nexport async function crearAlumno(alumno) {\n  const data = await intentarFetch(`${BASE}/alumnos`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(alumno)\n  });\n  if (data) return data;\n\n  // SIMULACIÓN LOCAL\n  alumno.id = alumnosMock.length + 1;\n  alumno.notas = [];\n  alumnosMock.push(alumno);\n  return alumno;\n}\nexport async function borrarAlumno(id) {\n  const data = await intentarFetch(`${BASE}/alumnos/${id}`, {\n    method: \"DELETE\"\n  });\n  if (data) return data;\n\n  // SIMULACIÓN LOCAL\n  const index = alumnosMock.findIndex(a => a.id === Number(id));\n  if (index !== -1) alumnosMock.splice(index, 1);\n  return {\n    ok: true\n  };\n}\nexport async function obtenerNotas(id) {\n  const data = await intentarFetch(`${BASE}/alumnos/${id}/notas`);\n  if (data) return data;\n  const alumno = alumnosMock.find(a => a.id === Number(id));\n  return alumno ? alumno.notas : [];\n}","map":{"version":3,"names":["alumnosMock","BASE","intentarFetch","url","opciones","res","fetch","json","error","console","warn","obtenerTodos","data","obtenerAlumno","id","find","a","Number","crearAlumno","alumno","method","headers","body","JSON","stringify","length","notas","push","borrarAlumno","index","findIndex","splice","ok","obtenerNotas"],"sources":["C:/Users/alber/Downloads/REACTALBERTO/src/services/api.js"],"sourcesContent":["import { alumnosMock } from \"./datosMock\";\n\nconst BASE = \"http://servidorclasedaw.onrender.com/alumno2\";\n\nasync function intentarFetch(url, opciones = {}) {\n  try {\n    const res = await fetch(url, opciones);\n    return await res.json();\n  } catch (error) {\n    console.warn(\"Servidor caído, usando datos locales\");\n    return null;\n  }\n}\n\nexport async function obtenerTodos() {\n  const data = await intentarFetch(`${BASE}/alumnos`);\n  return data || alumnosMock;\n}\n\nexport async function obtenerAlumno(id) {\n  const data = await intentarFetch(`${BASE}/alumnos/${id}`);\n\n  if (data) return data;\n\n  return alumnosMock.find(a => a.id === Number(id));\n}\n\nexport async function crearAlumno(alumno) {\n  const data = await intentarFetch(`${BASE}/alumnos`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(alumno)\n  });\n\n  if (data) return data;\n\n  // SIMULACIÓN LOCAL\n  alumno.id = alumnosMock.length + 1;\n  alumno.notas = [];\n  alumnosMock.push(alumno);\n\n  return alumno;\n}\n\nexport async function borrarAlumno(id) {\n  const data = await intentarFetch(`${BASE}/alumnos/${id}`, {\n    method: \"DELETE\"\n  });\n\n  if (data) return data;\n\n  // SIMULACIÓN LOCAL\n  const index = alumnosMock.findIndex(a => a.id === Number(id));\n  if (index !== -1) alumnosMock.splice(index, 1);\n\n  return { ok: true };\n}\n\nexport async function obtenerNotas(id) {\n  const data = await intentarFetch(`${BASE}/alumnos/${id}/notas`);\n\n  if (data) return data;\n\n  const alumno = alumnosMock.find(a => a.id === Number(id));\n  return alumno ? alumno.notas : [];\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,aAAa;AAEzC,MAAMC,IAAI,GAAG,8CAA8C;AAE3D,eAAeC,aAAaA,CAACC,GAAG,EAAEC,QAAQ,GAAG,CAAC,CAAC,EAAE;EAC/C,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAEC,QAAQ,CAAC;IACtC,OAAO,MAAMC,GAAG,CAACE,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,sCAAsC,CAAC;IACpD,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAeC,YAAYA,CAAA,EAAG;EACnC,MAAMC,IAAI,GAAG,MAAMV,aAAa,CAAC,GAAGD,IAAI,UAAU,CAAC;EACnD,OAAOW,IAAI,IAAIZ,WAAW;AAC5B;AAEA,OAAO,eAAea,aAAaA,CAACC,EAAE,EAAE;EACtC,MAAMF,IAAI,GAAG,MAAMV,aAAa,CAAC,GAAGD,IAAI,YAAYa,EAAE,EAAE,CAAC;EAEzD,IAAIF,IAAI,EAAE,OAAOA,IAAI;EAErB,OAAOZ,WAAW,CAACe,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACF,EAAE,KAAKG,MAAM,CAACH,EAAE,CAAC,CAAC;AACnD;AAEA,OAAO,eAAeI,WAAWA,CAACC,MAAM,EAAE;EACxC,MAAMP,IAAI,GAAG,MAAMV,aAAa,CAAC,GAAGD,IAAI,UAAU,EAAE;IAClDmB,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,MAAM;EAC7B,CAAC,CAAC;EAEF,IAAIP,IAAI,EAAE,OAAOA,IAAI;;EAErB;EACAO,MAAM,CAACL,EAAE,GAAGd,WAAW,CAACyB,MAAM,GAAG,CAAC;EAClCN,MAAM,CAACO,KAAK,GAAG,EAAE;EACjB1B,WAAW,CAAC2B,IAAI,CAACR,MAAM,CAAC;EAExB,OAAOA,MAAM;AACf;AAEA,OAAO,eAAeS,YAAYA,CAACd,EAAE,EAAE;EACrC,MAAMF,IAAI,GAAG,MAAMV,aAAa,CAAC,GAAGD,IAAI,YAAYa,EAAE,EAAE,EAAE;IACxDM,MAAM,EAAE;EACV,CAAC,CAAC;EAEF,IAAIR,IAAI,EAAE,OAAOA,IAAI;;EAErB;EACA,MAAMiB,KAAK,GAAG7B,WAAW,CAAC8B,SAAS,CAACd,CAAC,IAAIA,CAAC,CAACF,EAAE,KAAKG,MAAM,CAACH,EAAE,CAAC,CAAC;EAC7D,IAAIe,KAAK,KAAK,CAAC,CAAC,EAAE7B,WAAW,CAAC+B,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;EAE9C,OAAO;IAAEG,EAAE,EAAE;EAAK,CAAC;AACrB;AAEA,OAAO,eAAeC,YAAYA,CAACnB,EAAE,EAAE;EACrC,MAAMF,IAAI,GAAG,MAAMV,aAAa,CAAC,GAAGD,IAAI,YAAYa,EAAE,QAAQ,CAAC;EAE/D,IAAIF,IAAI,EAAE,OAAOA,IAAI;EAErB,MAAMO,MAAM,GAAGnB,WAAW,CAACe,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACF,EAAE,KAAKG,MAAM,CAACH,EAAE,CAAC,CAAC;EACzD,OAAOK,MAAM,GAAGA,MAAM,CAACO,KAAK,GAAG,EAAE;AACnC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}